/**
 * JustGage - animated gauges using RaphaelJS
 * Check http://www.justgage.com for official releases
 * Licensed under MIT.
 * @author Bojan Djuricic (@Toorshia)
 **/
JustGage=function(e){var t=this;if(e===null||e===undefined){console.log("* justgage: Make sure to pass options to the constructor!");return false}var i;if(e.id!==null&&e.id!==undefined){i=document.getElementById(e.id);if(!i){console.log("* justgage: No element with id : %s found",e.id);return false}}else if(e.parentNode!==null&&e.parentNode!==undefined){i=e.parentNode}else{console.log("* justgage: Make sure to pass the existing element id or parentNode to the constructor.");return false}var n=i.dataset?i.dataset:{};var o=e.defaults!==null&&e.defaults!==undefined?e.defaults:false;if(o!==false){e=extend({},e,o);delete e.defaults}t.config={id:e.id,value:kvLookup("value",e,n,0,"float"),defaults:kvLookup("defaults",e,n,0,false),parentNode:kvLookup("parentNode",e,n,null),width:kvLookup("width",e,n,null),height:kvLookup("height",e,n,null),title:kvLookup("title",e,n,""),titleFontColor:kvLookup("titleFontColor",e,n,"#999999"),titleFontFamily:kvLookup("titleFontFamily",e,n,"sans-serif"),titlePosition:kvLookup("titlePosition",e,n,"above"),valueFontColor:kvLookup("valueFontColor",e,n,"#010101"),valueFontFamily:kvLookup("valueFontFamily",e,n,"Arial"),symbol:kvLookup("symbol",e,n,""),min:kvLookup("min",e,n,0,"float"),max:kvLookup("max",e,n,100,"float"),reverse:kvLookup("reverse",e,n,false),humanFriendlyDecimal:kvLookup("humanFriendlyDecimal",e,n,0),textRenderer:kvLookup("textRenderer",e,n,null),gaugeWidthScale:kvLookup("gaugeWidthScale",e,n,1),gaugeColor:kvLookup("gaugeColor",e,n,"#edebeb"),label:kvLookup("label",e,n,""),labelFontColor:kvLookup("labelFontColor",e,n,"#b3b3b3"),shadowOpacity:kvLookup("shadowOpacity",e,n,.2),shadowSize:kvLookup("shadowSize",e,n,5),shadowVerticalOffset:kvLookup("shadowVerticalOffset",e,n,3),levelColors:kvLookup("levelColors",e,n,["#a9d70b","#f9c802","#ff0000"],"array",","),startAnimationTime:kvLookup("startAnimationTime",e,n,700),startAnimationType:kvLookup("startAnimationType",e,n,">"),refreshAnimationTime:kvLookup("refreshAnimationTime",e,n,700),refreshAnimationType:kvLookup("refreshAnimationType",e,n,">"),donutStartAngle:kvLookup("donutStartAngle",e,n,90),valueMinFontSize:kvLookup("valueMinFontSize",e,n,16),titleMinFontSize:kvLookup("titleMinFontSize",e,n,10),labelMinFontSize:kvLookup("labelMinFontSize",e,n,10),minLabelMinFontSize:kvLookup("minLabelMinFontSize",e,n,10),maxLabelMinFontSize:kvLookup("maxLabelMinFontSize",e,n,10),hideValue:kvLookup("hideValue",e,n,false),hideMinMax:kvLookup("hideMinMax",e,n,false),hideInnerShadow:kvLookup("hideInnerShadow",e,n,false),humanFriendly:kvLookup("humanFriendly",e,n,false),noGradient:kvLookup("noGradient",e,n,false),donut:kvLookup("donut",e,n,false),relativeGaugeSize:kvLookup("relativeGaugeSize",e,n,false),counter:kvLookup("counter",e,n,false),decimals:kvLookup("decimals",e,n,0),customSectors:kvLookup("customSectors",e,n,[]),formatNumber:kvLookup("formatNumber",e,n,false),pointer:kvLookup("pointer",e,n,false),pointerOptions:kvLookup("pointerOptions",e,n,[])};var a,l,r,f,s,u,c,m,g,d,p,h,v,x,b,k,y,M,F,S,w,L;if(t.config.value>t.config.max)t.config.value=t.config.max;if(t.config.value<t.config.min)t.config.value=t.config.min;t.originalValue=kvLookup("value",e,n,-1,"float");if(t.config.id!==null&&document.getElementById(t.config.id)!==null){t.canvas=Raphael(t.config.id,"100%","100%")}else if(t.config.parentNode!==null){t.canvas=Raphael(t.config.parentNode,"100%","100%")}if(t.config.relativeGaugeSize===true){t.canvas.setViewBox(0,0,200,150,true)}if(t.config.relativeGaugeSize===true){a=200;l=150}else if(t.config.width!==null&&t.config.height!==null){a=t.config.width;l=t.config.height}else if(t.config.parentNode!==null){t.canvas.setViewBox(0,0,200,150,true);a=200;l=150}else{a=getStyle(document.getElementById(t.config.id),"width").slice(0,-2)*1;l=getStyle(document.getElementById(t.config.id),"height").slice(0,-2)*1}if(t.config.donut===true){if(a>l){f=l;r=f}else if(a<l){r=a;f=r;if(f>l){s=f/l;f=f/s;r=f/s}}else{r=a;f=r}u=(a-r)/2;c=(l-f)/2;m=f/8>10?f/10:10;g=u+r/2;d=c+f/11;p=f/6.4>16?f/5.4:18;h=u+r/2;if(t.config.label!==""){v=c+f/1.85}else{v=c+f/1.7}x=f/16>10?f/16:10;b=u+r/2;k=v+x;y=f/16>10?f/16:10;M=u+r/10+r/6.666666666666667*t.config.gaugeWidthScale/2;F=k;S=f/16>10?f/16:10;w=u+r-r/10-r/6.666666666666667*t.config.gaugeWidthScale/2;L=k}else{if(a>l){f=l;r=f*1.25;if(r>a){s=r/a;r=r/s;f=f/s}}else if(a<l){r=a;f=r/1.25;if(f>l){s=f/l;f=f/s;r=f/s}}else{r=a;f=r*.75}u=(a-r)/2;c=(l-f)/2;if(t.config.titlePosition==="below"){c-=f/6.4}m=f/8>t.config.titleMinFontSize?f/10:t.config.titleMinFontSize;g=u+r/2;d=c+(t.config.titlePosition==="below"?f*1.07:f/6.4);p=f/6.5>t.config.valueMinFontSize?f/6.5:t.config.valueMinFontSize;h=u+r/2;v=c+f/1.275;x=f/16>t.config.labelMinFontSize?f/16:t.config.labelMinFontSize;b=u+r/2;k=v+p/2+5;y=f/16>t.config.minLabelMinFontSize?f/16:t.config.minLabelMinFontSize;M=u+r/10+r/6.666666666666667*t.config.gaugeWidthScale/2;F=k;S=f/16>t.config.maxLabelMinFontSize?f/16:t.config.maxLabelMinFontSize;w=u+r-r/10-r/6.666666666666667*t.config.gaugeWidthScale/2;L=k}t.params={canvasW:a,canvasH:l,widgetW:r,widgetH:f,dx:u,dy:c,titleFontSize:m,titleX:g,titleY:d,valueFontSize:p,valueX:h,valueY:v,labelFontSize:x,labelX:b,labelY:k,minFontSize:y,minX:M,minY:F,maxFontSize:S,maxX:w,maxY:L};a,l,r,f,s,u,c,m,g,d,p,h,v,x,b,k,y,M,F,S,w,L=null;t.canvas.customAttributes.pki=function(e,t,i,n,o,a,l,r,f,s){var u,c,m,g,d,p,h,v,x,b;if(f){u=(1-2*(e-t)/(i-t))*Math.PI;c=n/2-n/7;m=c-n/6.666666666666667*r;g=n/2+a;d=o/1.95+l;p=n/2+a+c*Math.cos(u);h=o-(o-d)-c*Math.sin(u);v=n/2+a+m*Math.cos(u);x=o-(o-d)-m*Math.sin(u);b="M"+(g-m)+","+d+" ";b+="L"+(g-c)+","+d+" ";if(e>(i-t)/2){b+="A"+c+","+c+" 0 0 1 "+(g+c)+","+d+" "}b+="A"+c+","+c+" 0 0 1 "+p+","+h+" ";b+="L"+v+","+x+" ";if(e>(i-t)/2){b+="A"+m+","+m+" 0 0 0 "+(g+m)+","+d+" "}b+="A"+m+","+m+" 0 0 0 "+(g-m)+","+d+" ";b+="Z ";return{path:b}}else{u=(1-(e-t)/(i-t))*Math.PI;c=n/2-n/10;m=c-n/6.666666666666667*r;g=n/2+a;d=o/1.25+l;p=n/2+a+c*Math.cos(u);h=o-(o-d)-c*Math.sin(u);v=n/2+a+m*Math.cos(u);x=o-(o-d)-m*Math.sin(u);b="M"+(g-m)+","+d+" ";b+="L"+(g-c)+","+d+" ";b+="A"+c+","+c+" 0 0 1 "+p+","+h+" ";b+="L"+v+","+x+" ";b+="A"+m+","+m+" 0 0 0 "+(g-m)+","+d+" ";b+="Z ";return{path:b}}u,c,m,g,d,p,h,v,x,b=null};t.canvas.customAttributes.ndl=function(e,i,n,o,a,l,r,f,s){var u=o*3.5/100;var c=o/15;var m=o/100;if(t.config.pointerOptions.toplength!=null&&t.config.pointerOptions.toplength!=undefined)u=t.config.pointerOptions.toplength;if(t.config.pointerOptions.bottomlength!=null&&t.config.pointerOptions.bottomlength!=undefined)c=t.config.pointerOptions.bottomlength;if(t.config.pointerOptions.bottomwidth!=null&&t.config.pointerOptions.bottomwidth!=undefined)m=t.config.pointerOptions.bottomwidth;var g,d,p,h,v,x,b,k,y,M,F,S,w,L,A,z,N,C;if(s){g=(1-2*(e-i)/(n-i))*Math.PI;d=o/2-o/7;p=d-o/6.666666666666667*f;h=o/2+l;v=a/1.95+r;x=o/2+l+d*Math.cos(g);b=a-(a-v)-d*Math.sin(g);k=o/2+l+p*Math.cos(g);y=a-(a-v)-p*Math.sin(g);M=x+u*Math.cos(g);F=b-u*Math.sin(g);S=k-c*Math.cos(g);w=y+c*Math.sin(g);L=S+m*Math.sin(g);A=w+m*Math.cos(g);z=S-m*Math.sin(g);N=w-m*Math.cos(g);C="M"+L+","+A+" ";C+="L"+z+","+N+" ";C+="L"+M+","+F+" ";C+="Z ";return{path:C}}else{g=(1-(e-i)/(n-i))*Math.PI;d=o/2-o/10;p=d-o/6.666666666666667*f;h=o/2+l;v=a/1.25+r;x=o/2+l+d*Math.cos(g);b=a-(a-v)-d*Math.sin(g);k=o/2+l+p*Math.cos(g);y=a-(a-v)-p*Math.sin(g);M=x+u*Math.cos(g);F=b-u*Math.sin(g);S=k-c*Math.cos(g);w=y+c*Math.sin(g);L=S+m*Math.sin(g);A=w+m*Math.cos(g);z=S-m*Math.sin(g);N=w-m*Math.cos(g);C="M"+L+","+A+" ";C+="L"+z+","+N+" ";C+="L"+M+","+F+" ";C+="Z ";return{path:C}}g,d,p,h,v,x,b,k,y,M,F,S,w,L,A,z,N,C=null};t.gauge=t.canvas.path().attr({stroke:"none",fill:t.config.gaugeColor,pki:[t.config.max,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut,t.config.reverse]});t.level=t.canvas.path().attr({stroke:"none",fill:getColor(t.config.value,(t.config.value-t.config.min)/(t.config.max-t.config.min),t.config.levelColors,t.config.noGradient,t.config.customSectors),pki:[t.config.min,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut,t.config.reverse]});if(t.config.donut){t.level.transform("r"+t.config.donutStartAngle+", "+(t.params.widgetW/2+t.params.dx)+", "+(t.params.widgetH/1.95+t.params.dy))}if(t.config.pointer){t.needle=t.canvas.path().attr({stroke:t.config.pointerOptions.stroke!==null&&t.config.pointerOptions.stroke!==undefined?t.config.pointerOptions.stroke:"none","stroke-width":t.config.pointerOptions.stroke_width!==null&&t.config.pointerOptions.stroke_width!==undefined?t.config.pointerOptions.stroke_width:0,"stroke-linecap":t.config.pointerOptions.stroke_linecap!==null&&t.config.pointerOptions.stroke_linecap!==undefined?t.config.pointerOptions.stroke_linecap:"square",fill:t.config.pointerOptions.color!==null&&t.config.pointerOptions.color!==undefined?t.config.pointerOptions.color:"#000000",ndl:[t.config.min,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]});if(t.config.donut){t.needle.transform("r"+t.config.donutStartAngle+", "+(t.params.widgetW/2+t.params.dx)+", "+(t.params.widgetH/1.95+t.params.dy))}}t.txtTitle=t.canvas.text(t.params.titleX,t.params.titleY,t.config.title);t.txtTitle.attr({"font-size":t.params.titleFontSize,"font-weight":"bold","font-family":t.config.titleFontFamily,fill:t.config.titleFontColor,"fill-opacity":"1"});setDy(t.txtTitle,t.params.titleFontSize,t.params.titleY);t.txtValue=t.canvas.text(t.params.valueX,t.params.valueY,0);t.txtValue.attr({"font-size":t.params.valueFontSize,"font-weight":"bold","font-family":t.config.valueFontFamily,fill:t.config.valueFontColor,"fill-opacity":"0"});setDy(t.txtValue,t.params.valueFontSize,t.params.valueY);t.txtLabel=t.canvas.text(t.params.labelX,t.params.labelY,t.config.label);t.txtLabel.attr({"font-size":t.params.labelFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":"0"});setDy(t.txtLabel,t.params.labelFontSize,t.params.labelY);var A=t.config.min;if(t.config.reverse){A=t.config.max}t.txtMinimum=A;if(t.config.humanFriendly){t.txtMinimum=humanFriendlyNumber(A,t.config.humanFriendlyDecimal)}else if(t.config.formatNumber){t.txtMinimum=formatNumber(A)}t.txtMin=t.canvas.text(t.params.minX,t.params.minY,t.txtMinimum);t.txtMin.attr({"font-size":t.params.minFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"});setDy(t.txtMin,t.params.minFontSize,t.params.minY);var z=t.config.max;if(t.config.reverse){z=t.config.min}t.txtMaximum=z;if(t.config.humanFriendly){t.txtMaximum=humanFriendlyNumber(z,t.config.humanFriendlyDecimal)}else if(t.config.formatNumber){t.txtMaximum=formatNumber(z)}t.txtMax=t.canvas.text(t.params.maxX,t.params.maxY,t.txtMaximum);t.txtMax.attr({"font-size":t.params.maxFontSize,"font-weight":"normal","font-family":"Arial",fill:t.config.labelFontColor,"fill-opacity":t.config.hideMinMax||t.config.donut?"0":"1"});setDy(t.txtMax,t.params.maxFontSize,t.params.maxY);var N=t.canvas.canvas.childNodes[1];var C="http://www.w3.org/2000/svg";if(ie!=="undefined"&&ie<9){}else if(ie!=="undefined"){onCreateElementNsReady(function(){t.generateShadow(C,N)})}else{t.generateShadow(C,N)}N,C=null;if(t.config.textRenderer){t.originalValue=t.config.textRenderer(t.originalValue)}else if(t.config.humanFriendly){t.originalValue=humanFriendlyNumber(t.originalValue,t.config.humanFriendlyDecimal)+t.config.symbol}else if(t.config.formatNumber){t.originalValue=formatNumber(t.originalValue)+t.config.symbol}else{t.originalValue=(t.originalValue*1).toFixed(t.config.decimals)+t.config.symbol}if(t.config.counter===true){eve.on("raphael.anim.frame."+t.level.id,function(){var e=t.level.attr("pki")[0];if(t.config.reverse){e=t.config.max*1+t.config.min*1-t.level.attr("pki")[0]*1}if(t.config.textRenderer){t.txtValue.attr("text",t.config.textRenderer(Math.floor(e)))}else if(t.config.humanFriendly){t.txtValue.attr("text",humanFriendlyNumber(Math.floor(e),t.config.humanFriendlyDecimal)+t.config.symbol)}else if(t.config.formatNumber){t.txtValue.attr("text",formatNumber(Math.floor(e))+t.config.symbol)}else{t.txtValue.attr("text",(e*1).toFixed(t.config.decimals)+t.config.symbol)}setDy(t.txtValue,t.params.valueFontSize,t.params.valueY);e=null});eve.on("raphael.anim.finish."+t.level.id,function(){t.txtValue.attr({text:t.originalValue});setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)})}else{eve.on("raphael.anim.start."+t.level.id,function(){t.txtValue.attr({text:t.originalValue});setDy(t.txtValue,t.params.valueFontSize,t.params.valueY)})}var V=t.config.value;if(t.config.reverse){V=t.config.max*1+t.config.min*1-t.config.value*1}t.level.animate({pki:[V,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut,t.config.reverse]},t.config.startAnimationTime,t.config.startAnimationType);if(t.config.pointer){t.needle.animate({ndl:[V,t.config.min,t.config.max,t.params.widgetW,t.params.widgetH,t.params.dx,t.params.dy,t.config.gaugeWidthScale,t.config.donut]},t.config.startAnimationTime,t.config.startAnimationType)}t.txtValue.animate({"fill-opacity":t.config.hideValue?"0":"1"},t.config.startAnimationTime,t.config.startAnimationType);t.txtLabel.animate({"fill-opacity":"1"},t.config.startAnimationTime,t.config.startAnimationType)};JustGage.prototype.refresh=function(e,t){var i=this;var n,o,t=t||null;if(t!==null){i.config.max=t;i.txtMaximum=i.config.max;if(i.config.humanFriendly){i.txtMaximum=humanFriendlyNumber(i.config.max,i.config.humanFriendlyDecimal)}else if(i.config.formatNumber){i.txtMaximum=formatNumber(i.config.max)}if(!i.config.reverse){i.txtMax.attr({text:i.txtMaximum});setDy(i.txtMax,i.params.maxFontSize,i.params.maxY)}else{i.txtMin.attr({text:i.txtMaximum});setDy(i.txtMin,i.params.minFontSize,i.params.minY)}}n=e;if(e*1>i.config.max*1){e=i.config.max*1}if(e*1<i.config.min*1){e=i.config.min*1}o=getColor(e,(e-i.config.min)/(i.config.max-i.config.min),i.config.levelColors,i.config.noGradient,i.config.customSectors);if(i.config.textRenderer){n=i.config.textRenderer(n)}else if(i.config.humanFriendly){n=humanFriendlyNumber(n,i.config.humanFriendlyDecimal)+i.config.symbol}else if(i.config.formatNumber){n=formatNumber((n*1).toFixed(i.config.decimals))+i.config.symbol}else{n=(n*1).toFixed(i.config.decimals)+i.config.symbol}i.originalValue=n;i.config.value=e*1;if(!i.config.counter){i.txtValue.attr({text:n});setDy(i.txtValue,i.params.valueFontSize,i.params.valueY)}var a=i.config.value;if(i.config.reverse){a=i.config.max*1+i.config.min*1-i.config.value*1}i.level.animate({pki:[a,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut,i.config.reverse],fill:o},i.config.refreshAnimationTime,i.config.refreshAnimationType);if(i.config.pointer){i.needle.animate({ndl:[a,i.config.min,i.config.max,i.params.widgetW,i.params.widgetH,i.params.dx,i.params.dy,i.config.gaugeWidthScale,i.config.donut]},i.config.refreshAnimationTime,i.config.refreshAnimationType)}i,n,o,t=null};JustGage.prototype.generateShadow=function(e,t){var i=this;var n="inner-shadow-"+i.config.id;var o,a,l,r,f,s,u;o=document.createElementNS(e,"filter");o.setAttribute("id",n);t.appendChild(o);a=document.createElementNS(e,"feOffset");a.setAttribute("dx",0);a.setAttribute("dy",i.config.shadowVerticalOffset);o.appendChild(a);l=document.createElementNS(e,"feGaussianBlur");l.setAttribute("result","offset-blur");l.setAttribute("stdDeviation",i.config.shadowSize);o.appendChild(l);r=document.createElementNS(e,"feComposite");r.setAttribute("operator","out");r.setAttribute("in","SourceGraphic");r.setAttribute("in2","offset-blur");r.setAttribute("result","inverse");o.appendChild(r);f=document.createElementNS(e,"feFlood");f.setAttribute("flood-color","black");f.setAttribute("flood-opacity",i.config.shadowOpacity);f.setAttribute("result","color");o.appendChild(f);s=document.createElementNS(e,"feComposite");s.setAttribute("operator","in");s.setAttribute("in","color");s.setAttribute("in2","inverse");s.setAttribute("result","shadow");o.appendChild(s);u=document.createElementNS(e,"feComposite");u.setAttribute("operator","over");u.setAttribute("in","shadow");u.setAttribute("in2","SourceGraphic");o.appendChild(u);if(!i.config.hideInnerShadow){i.canvas.canvas.childNodes[2].setAttribute("filter","url(#"+n+")");i.canvas.canvas.childNodes[3].setAttribute("filter","url(#"+n+")")}o,a,l,r,f,s,u=null};function kvLookup(e,t,i,n,o,a){var l=n;var r=false;if(!(e===null||e===undefined)){if(i!==null&&i!==undefined&&typeof i==="object"&&e in i){l=i[e];r=true}else if(t!==null&&t!==undefined&&typeof t==="object"&&e in t){l=t[e];r=true}else{l=n}if(r===true){if(o!==null&&o!==undefined){switch(o){case"int":l=parseInt(l,10);break;case"float":l=parseFloat(l);break;default:break}}}}return l}function getColor(e,t,i,n,o){var a,l,r,f,s,u,c,m,g,d,p,h,v,x;var n=n||o.length>0;if(o.length>0){for(var b=0;b<o.length;b++){if(e>o[b].lo&&e<=o[b].hi){return o[b].color}}}a=i.length;if(a===1)return i[0];l=n?1/a:1/(a-1);r=[];for(b=0;b<i.length;b++){f=n?l*(b+1):l*b;s=parseInt(cutHex(i[b]).substring(0,2),16);u=parseInt(cutHex(i[b]).substring(2,4),16);c=parseInt(cutHex(i[b]).substring(4,6),16);r[b]={pct:f,color:{r:s,g:u,b:c}}}if(t===0){return"rgb("+[r[0].color.r,r[0].color.g,r[0].color.b].join(",")+")"}for(var k=0;k<r.length;k++){if(t<=r[k].pct){if(n){return"rgb("+[r[k].color.r,r[k].color.g,r[k].color.b].join(",")+")"}else{m=r[k-1];g=r[k];d=g.pct-m.pct;p=(t-m.pct)/d;h=1-p;v=p;x={r:Math.floor(m.color.r*h+g.color.r*v),g:Math.floor(m.color.g*h+g.color.g*v),b:Math.floor(m.color.b*h+g.color.b*v)};return"rgb("+[x.r,x.g,x.b].join(",")+")"}}}}function setDy(e,t,i){if((!ie||ie>9)&&e.node.firstChild.attributes.dy){e.node.firstChild.attributes.dy.value=0}}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function cutHex(e){return e.charAt(0)=="#"?e.substring(1,7):e}function humanFriendlyNumber(e,t){var i,n,o,a;i=Math.pow;n=i(10,t);o=7;while(o){a=i(10,o--*3);if(a<=e){e=Math.round(e*n/a)/n+"KMGTPE"[o]}}return e}function formatNumber(e){var t=e.toString().split(".");t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return t.join(".")}function getStyle(e,t){var i="";if(document.defaultView&&document.defaultView.getComputedStyle){i=document.defaultView.getComputedStyle(e,"").getPropertyValue(t)}else if(e.currentStyle){t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()});i=e.currentStyle[t]}return i}function onCreateElementNsReady(e){if(document.createElementNS!==undefined){e()}else{setTimeout(function(){onCreateElementNsReady(e)},100)}}var ie=function(){var e,t=3,i=document.createElement("div"),n=i.getElementsByTagName("i");while(i.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",n[0]);return t>4?t:e}();function extend(e){e=e||{};for(var t=1;t<arguments.length;t++){if(!arguments[t])continue;for(var i in arguments[t]){if(arguments[t].hasOwnProperty(i))e[i]=arguments[t][i]}}return e}